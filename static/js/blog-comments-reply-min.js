"use strict";function renderComment(t){var e=jQuery(".comment-template").clone(!0,!0),s=1===t.depth?0:70*(t.depth-1);return e.find(".comment").addClass(t.classes).attr("id",t.id).css("padding-left",s),e.find(".comment-content").attr("id","comment-"+t.id),e.find(".avatar").html(t.avatar),e.find(".author").html(t.author),e.find(".date").html(t.date).attr("href","#comment-"+t.id),e.find(".comment-text").html(t.text),e.html()}function getPostComments(t){var e=jQuery(".loader");jQuery.ajax({type:"GET",url:adminAjax,data:{post_id:t,action:"nord_get_comments"},beforeLoad:function(){e.show()},error:function(){e.hide()},success:function(t){commentsContainer.html(""),"success"===t.status&&(jQuery("#approved-comments-count").show().find("span").html(t.count),jQuery.each(t.comments,function(t,e){commentsContainer.append(renderComment(e))})),e.hide()}})}var previousCommentId,commentsContainer=jQuery(".comment-list"),postId=parseInt((jQuery("body").prop("class").match(/(?:^|\s)postid-([0-9]+)(?:\s|$)/)||[0,0])[1]);jQuery(document).on("click",".comment-reply-link",function(t){t.preventDefault();var e=jQuery(this).closest(".comment").attr("id"),s=jQuery("#"+e+" .quick-comment-box");s.find("#comment_parent").val(e),s.find("#comment_post_ID").val(postId),jQuery(".quick-comment-box").slideUp("fast"),(previousCommentId!==e||previousCommentId===e&&!s.is(":visible"))&&s.slideDown("fast"),previousCommentId=jQuery(this).closest(".comment").attr("id")}),jQuery(document).on("submit","#commentform",function(t){t.preventDefault();var e=jQuery(this).serialize(),s=jQuery(this).attr("action"),o=jQuery(this).find(".form-response");jQuery.ajax({type:"POST",url:s,data:e,error:function(){o.removeClass("success error").html(blogCommentPostTranslations.error).addClass("error").fadeIn("fast")},success:function(t,e){"success"===e?(o.removeClass("success error").html(blogCommentPostTranslations.success).addClass("success").fadeIn("fast"),setTimeout(function(){getPostComments(postId)},2e3)):o.removeClass("success error").html(blogCommentPostTranslations.tooFast).addClass("error").fadeIn("fast")}})}),getPostComments(postId);